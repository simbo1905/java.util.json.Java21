<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>java.util.json Backport for JDK 21+</title>
    <style>
        :root {
            --bg: #f6f1e8;
            --paper: #fffaf2;
            --ink: #1f2933;
            --muted: #52616b;
            --accent: #0f766e;
            --accent-2: #b45309;
            --border: rgba(31, 41, 51, 0.12);
            --shadow: 0 18px 60px rgba(16, 24, 40, 0.10);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 24px;
            color: var(--ink);
            line-height: 1.65;
            font-family: "Iowan Old Style", "Palatino Linotype", Palatino, "Book Antiqua", serif;
            background:
                radial-gradient(1200px 600px at 18% 12%, rgba(15, 118, 110, 0.10), transparent 55%),
                radial-gradient(900px 500px at 85% 18%, rgba(180, 83, 9, 0.10), transparent 60%),
                linear-gradient(180deg, var(--bg), #f9f6ef);
        }

        .container {
            max-width: 980px;
            margin: 0 auto;
            padding: 28px;
            border-radius: 16px;
            background: var(--paper);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }

        header {
            padding: 6px 0 18px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 22px;
        }

        h1 {
            margin: 0 0 6px;
            font-size: clamp(28px, 3.3vw, 38px);
            letter-spacing: -0.02em;
        }

        h2 {
            margin: 22px 0 10px;
            font-size: 20px;
            letter-spacing: -0.01em;
        }

        h3 {
            margin: 14px 0 8px;
            font-size: 16px;
        }

        p, li {
            color: var(--ink);
        }

        .subhead {
            margin: 0;
            color: var(--muted);
            max-width: 70ch;
        }

        .callout {
            margin: 14px 0 0;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(15, 118, 110, 0.25);
            background: rgba(15, 118, 110, 0.06);
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 14px;
        }

        @media (min-width: 900px) {
            .grid {
                grid-template-columns: 1.1fr 0.9fr;
                gap: 18px;
            }
        }

        pre {
            margin: 10px 0 0;
            padding: 14px;
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: rgba(31, 41, 51, 0.04);
        }

        code {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.95em;
        }

        pre code {
            background: transparent;
        }

        .links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
        }

        .button {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 999px;
            text-decoration: none;
            font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", sans-serif;
            font-weight: 650;
            border: 1px solid rgba(15, 118, 110, 0.35);
            background: rgba(15, 118, 110, 0.10);
            color: var(--ink);
        }

        .button:hover {
            background: rgba(15, 118, 110, 0.16);
        }

        .button.secondary {
            border-color: rgba(180, 83, 9, 0.35);
            background: rgba(180, 83, 9, 0.10);
        }

        .button.secondary:hover {
            background: rgba(180, 83, 9, 0.16);
        }

        .meta {
            color: var(--muted);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>java.util.json Backport for JDK 21+</h1>
            <p class="subhead">A backport of the experimental <code>java.util.json</code> API from the OpenJDK jdk-sandbox “json” branch, plus an incubating JSON Type Definition (JTD) validator (RFC 8927).</p>
            <div class="callout">
                <strong>Early access / unstable:</strong> APIs and behaviour may change as upstream evolves.
            </div>
            <div class="links">
                <a href="https://central.sonatype.com/artifact/io.github.simbo1905.json/java.util.json" class="button">Maven Central</a>
                <a href="https://github.com/simbo1905/java.util.json.Java21" class="button">GitHub</a>
                <a href="Towards%20a%20JSON%20API%20for%20the%20JDK.pdf" class="button secondary">Design Paper (PDF)</a>
                <a href="https://github.com/openjdk/jdk-sandbox/tree/json" class="button secondary">OpenJDK jdk-sandbox</a>
            </div>
        </header>

        <div class="grid">
            <section>
                <h2>Quick Start</h2>

                <h3>Maven</h3>
                <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;io.github.simbo1905.json&lt;/groupId&gt;
    &lt;artifactId&gt;java.util.json&lt;/artifactId&gt;
    &lt;version&gt;2026.01.26&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

                <h3>Parse and access</h3>
                <pre><code>import jdk.sandbox.java.util.json.*;

JsonObject obj = (JsonObject) Json.parse("{\"name\":\"Alice\",\"age\":30}");

String name = obj.get("name").string();
long age = obj.get("age").toLong();</code></pre>
            </section>

            <section>
                <h2>What’s Included</h2>
                <ul>
                    <li><strong>Immutable JSON values:</strong> <code>JsonObject</code>, <code>JsonArray</code>, <code>JsonString</code>, <code>JsonNumber</code>, <code>JsonBoolean</code>, <code>JsonNull</code></li>
                    <li><strong>Typed factories:</strong> build JSON with <code>JsonObject.of</code>, <code>JsonArray.of</code>, <code>JsonString.of</code>, <code>JsonNumber.of</code>, <code>JsonBoolean.of</code></li>
                    <li><strong>Type-safe accessors:</strong> <code>obj.get("x").string()</code>, <code>value.toLong()</code>, <code>value.toDouble()</code>, <code>value.bool()</code></li>
                    <li><strong>JTD validator (RFC 8927):</strong> module <code>json-java21-jtd</code> for real-world JSON-heavy logic</li>
                </ul>
            </section>
        </div>

        <h2>Record Mapping (explicit, typed)</h2>
        <pre><code>import jdk.sandbox.java.util.json.*;
import java.util.*;

record User(String name, String email, boolean active) {}
record Team(String teamName, List&lt;User&gt; members) {}

Team team = new Team("Engineering", List.of(
    new User("Alice", "alice@example.com", true),
    new User("Bob", "bob@example.com", false)
));

JsonValue teamJson = JsonObject.of(Map.of(
    "teamName", JsonString.of(team.teamName()),
    "members", JsonArray.of(team.members().stream()
        .map(u -&gt; JsonObject.of(Map.of(
            "name", JsonString.of(u.name()),
            "email", JsonString.of(u.email()),
            "active", JsonBoolean.of(u.active())
        )))
        .toList())
));</code></pre>

        <h2>Run the README Examples</h2>
        <pre><code>mvn package
java -cp ./json-java21/target/java.util.json-*.jar:./json-java21/target/test-classes \
  jdk.sandbox.java.util.json.examples.ReadmeExamples</code></pre>
        <p class="meta">Replace <code>*</code> with the actual version number from the JAR filename.</p>

        <h2>JSON Test Suite Compatibility</h2>
        <pre><code># Run human-readable report
mvn exec:java -pl json-compatibility-suite

# Run JSON output (dogfoods the API)
mvn exec:java -pl json-compatibility-suite -Dexec.args="--json"</code></pre>

        <h2>JSON Type Definition (JTD) Validator</h2>
        <p class="meta">This repo includes an incubating JTD validator (RFC 8927) in module <code>json-java21-jtd</code>. Per RFC 8927, the empty schema <code>{}</code> accepts all JSON instances.</p>
        <pre><code>import json.java21.jtd.Jtd;
import jdk.sandbox.java.util.json.*;

JsonValue schema = Json.parse("""
  {
    "properties": {
      "name": {"type": "string"},
      "age": {"type": "int32"}
    }
  }
""");

JsonValue data = Json.parse("{\"name\":\"Alice\",\"age\":30}");

Jtd.Result result = new Jtd().validate(schema, data);
// result.isValid() == true</code></pre>

        <h2>Status</h2>
        <p class="meta">This code (as of 2026-01-25) is derived from the OpenJDK jdk-sandbox repository “json” branch. The API may evolve as the upstream design develops.</p>

        <h2>License</h2>
        <p class="meta">GNU General Public License version 2 with Classpath exception (same as OpenJDK).</p>
    </div>
</body>
</html>
